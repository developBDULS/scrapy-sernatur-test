(this.$WP=this.$WP||[]).push(["zPgUM0",(e,t)=>{"use strict";var s,i,a,n,o,r,l,c,d,u,h,p,m,v,g,y,S,I,f,T,E,C,k,N,R,_,O,x,F,b,A,M,w,P,L,D,j,G,V=(e,t,s,i)=>{var a=[t,s].filter(e=>!!e).join(", ");return"full_address"===e?i?`${i}, ${a}`:a:"parent_geos"===e?a:""},Y={geo:"GEO",nbrhd:"NEIGHBORHOOD",attr:"ATTRACTION",hotel:"ACCOMMODATION",eat:"EATERY",air:"AIRPORT",vr:"VACATION_RENTAL",al:"AIRLINE",ship:"SHIP",cruise_line:"CRUISE_LINE",car:"CAR_RENTAL_OFFICE",act:"ATTRACTION_PRODUCT",uni:"UNIVERSITY",shop:"SHOPPING",general_hospital:"GENERAL_HOSPITAL",port:"PORT",ferry:"FERRY",corp:"CORPORATION"},B=({fetchers:e,context:t,children:s,onResultsChange:i,filters:d,runOnInit:u=!1})=>{var[h,p]=a(Object.freeze({})),[m,v]=a(""),g=n(),y=n(i);o(()=>{y.current=i},[i]);var S=n([]),[I,f,T]=r(()=>{var t=e.filter(e=>"typeaheadjson"===e.id),s=[],i="",a=8;if(t.length){var n,o=null==(n=t[0])?void 0:n.props;o&&(o.types&&o.types.forEach(e=>{e in Y&&s.push(Y[e])}),i=o.source,a=o.max)}if(s.length===S.current.length){for(var r=0;r<s.length;r++)if(s[r]!==S.current[r]){S.current=s;break}}else S.current=s;return[i,a,S.current]},[e]),E=r(()=>{var t=e.filter(e=>"typeaheadjson"===e.id);if(t.length){var s,i=null==(s=t[0])?void 0:s.props;return i&&i.parentids?i.parentids[0]:1}return 1},[e]),C=r(()=>({geoId:E}),[E]),{results:k}=c(m,I,C,"LocationTypeahead",f,T),N=r(()=>k.results.map(e=>{var{title:t,subtitle:s,searchText:i,url:a,locationId:n,trackingPlaceType:o}=e,r="string"==typeof t&&"string"==typeof s?V("full_address",t,s||""):"";return{type:o||"",value:(n||"").toString(),url:a,name:r,details:{name:i,parent_name:"string"==typeof s?s:null}}}),[k]),R=l(()=>{var t={};e.forEach(e=>{var s="typeaheadjson"===e.id?N:e.getResults();t[e.id]=s?s.filter(e=>e&&(d||[]).every(t=>t(e))):s}),p(t)},[e,d,N]),_=n(e),O=n(R);o(()=>{O.current=R,_.current=e}),o(()=>{O.current()},[N]),o(()=>{y.current&&y.current(h)},[h]);var x=l(s=>{e.forEach(e=>{"typeaheadjson"===e.id&&""!==s?(v(s),R()):e.fetch(s,t,R)})},[e,t,R]);return o(()=>{u&&x("")},[]),o(()=>{g.current?_.current.forEach(e=>{var s=e;s.onContextChange&&"function"==typeof s.onContextChange&&s.onContextChange(t,O.current)}):g.current=!0},[t]),s?s(h,x):null},H="recentlyviewed",K=["act","air","al","ship","cruise_line","car","attr","eat","geo","hotel","nbrhd"],z="typeaheadjson",U={reversedSubtitle:"_100D6lCr",subtitle:"_3MnpP2mo",result:"_2JDAtFT1",rescue:"_18cQT_kz",rescueResult:"_3ZPkkCSH",active:"_1zaVYQrH",noPadding:"_2k2RVcvR",narrow:"fcyVtQIk",leftIcon:"_1PAM4ftA",resultTitle:"_1G-zBSBH",rightIcon:"XxFmfH2y",verified:"_1h-y5ebl"},J=e=>{var t=[U.result];e.active&&t.push(U.active),e.paddingStyle&&t.push(U[e.paddingStyle]),e.isRescue&&t.push(U.rescue);var i=e.subtitle?s.createElement("span",{className:e.reverseSubtitle?U.reversedSubtitle:U.subtitle},e.subtitle):void 0,a=e.iconName?s.createElement("span",{className:U.leftIcon},s.createElement(p,{name:e.iconName,size:18})):void 0,n=e.chevronName?s.createElement("span",{className:U.rightIcon},s.createElement(p,{name:e.chevronName,size:16})):void 0,o=e.verifiedIcon?s.createElement("span",{className:U.verified}):void 0;return s.createElement("div",{className:t.join(" ")},a,s.createElement("span",{className:h(U.resultTitle,{[U.rescueResult]:e.isRescue})},e.reverseSubtitle&&i,e.title,o,!e.reverseSubtitle&&i),n)},Q=e=>{switch(e){case"HOTEL":return"hotels";case"EATERY":return"restaurants";case"ATTRACTION":return"attractions";case"UNIVERSITY":return"classes-workshops";case"TRAIN_STATION":return"train";case"AIRPORT":return"flights";case"THEME_PARK":return"amusement-parks";case"ACTIVITY":return"activities";case"SHOPPING":return"shopping-bag";case"PORT":return"ports";case"GENERAL_HOSPITAL":return"hospital";case"FERRY":return"cruises";case"CORPORATION":return"office";case"BRAND":return null;case"NEIGHBORHOOD":return"neighborhoods-fill";case"AIRLINE":return"flights";case"SHIP":return"cruises";case"CAR_RENTAL_OFFICE":return"parking";case"GEO":default:return"map-pin-fill"}},W=e=>Q(e)||"",q=e=>{var{localize:t}=y(),i=t.string("mx_nearby");return s.createElement(m,{onSelection:t=>{var s="click"===t.type?"click":"enter",{tracker:i,resultIndex:a}=e,n={resultIndex:a,type:"NEARBY",value:1};i.trackSelection(n,s),e.onSelection&&e.onSelection(t,{type:"nearby"})},onMouseMove:e.onMouseMove,active:e.active},s.createElement(J,{title:i,iconName:"nearby",active:e.active}))},$=e=>{var{localize:t}=y(),i=t.string("dual_search_worldwide");return s.createElement(m,{onSelection:t=>{var s="click"===t.type?"click":"enter",{tracker:i,resultIndex:a}=e,n={resultIndex:a,type:"ALL",value:1};i.trackSelection(n,s),e.onSelection&&e.onSelection(t,{type:"worldwide"})},onMouseMove:e.onMouseMove,active:e.active},s.createElement(J,{title:i,iconName:"globe-world",active:e.active}))},X=()=>s.createElement(m,null,s.createElement(S,null,s.createElement("div",{className:"RUe_gRTX"},s.createElement(J,{title:"Loading",iconName:"globe-world",subtitle:"Loading",active:!0})))),Z=e=>{var{localize:t}=y(),i=t.string("mobile_no_results_found_8e0");return s.createElement("div",{className:h("_2q6Wgs-y",{"_3o7_-1EJ":e.small})},i)},ee={geos:"GEO",neighborhoods:"NEIGHBORHOOD",attractions:"ATTRACTION",hotels:"HOTEL",vr:"VACATION_RENTAL",restaurants:"EATERY",airports:"AIRPORT",airlines:"AIRLINE",cruise_lines:"CRUISE_LINE",attraction_products:"ACTIVITY"},te=({title:e})=>s.createElement("div",{className:"oeBh6ld3"},e),se=e=>{se.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1,resultIndex:void 0};var{localize:t}=y(),i=t.string("typeAheadSearchFor_fffff81b",{0:e.result.query});return s.createElement(m,{onSelection:t=>{var s="click"===t.type?"click":"enter",{tracker:i,onSelection:a,result:n,resultIndex:o}=e,r=Object.assign({resultIndex:o},n);i.trackSelection(r,s),a&&a(t,{type:"rescue",value:n.url})},onMouseMove:e.onMouseMove,active:e.active},s.createElement(J,{title:i,active:e.active,iconName:"search",isRescue:!0}))},ie=e=>{var{localize:t}=y();return s.createElement(P,Object.assign({},e,{localize:t}))},ae=({selectedLocations:e,onClose:t})=>{var[{data:i}]=T({query:G,variables:{locationIds:Array.from(e.keys()).map(e=>parseInt(e,10))},requestPolicy:"cache-and-network"});return i&&i.locations&&i.locations[0]?s.createElement(s.Fragment,null,i.locations.map(e=>(e=>{var i,a,n,o,r,l;switch(a="CITY"===(null==e?void 0:e.placeType)?null==e||null==(n=e.additionalNames)?void 0:n.longOnlyParent:null==e||null==(o=e.parent)||null==(r=o.additionalNames)?void 0:r.long,null==e?void 0:e.placeType){case"ACCOMMODATION":l="hotels";break;case"ATTRACTION":l="attractions";break;case"ACTIVITY":l="activities";break;case"EATERY":l="restaurants";break;case"CITY":l="globe-world";break;default:l=""}return s.createElement("div",{key:"poi_tag_"+(null==e?void 0:e.locationId),className:"_2x1NJ1sb _5SXzci5A"},s.createElement("div",{className:"_1MmCbYix"},(null==e?void 0:e.thumbnail)?s.createElement(E,{sources:null==e||null==(i=e.thumbnail)?void 0:i.photoSizes,width:"60px",height:"60px",notLazy:!1,borderRadius:"2px"}):s.createElement("div",{style:{width:"60px",height:"60px"}},s.createElement("div",{className:"JzhUqdoI"},s.createElement("span",{className:"_1ofLWrRb"},l?s.createElement(p,{name:l,size:60,color:"onDarkIcon"}):null)))),s.createElement("div",{className:"_2Qj5Cm5r"},s.createElement("div",{className:"_248F68TC"},s.createElement("div",{className:"_2CGgzESG"},null==e?void 0:e.name),s.createElement("div",{className:"_381b3sbE"},a))),t&&(null==e?void 0:e.locationId)?s.createElement("button",{className:"_3Rh25yl7",onClick:()=>{(null==e?void 0:e.locationId)&&t(e.locationId.toString())}},s.createElement(p,{name:"times"})):null)})(e))):null},ne=e=>{var t,i,[a,n]=s.useState(""),[o,r]=s.useState(!1),[l,c]=s.useState(!1),[d,u]=s.useState(!1),m=new N("",""),v=s.useCallback((s,a)=>{if(u(!0),a&&"location_id"===a.type&&a.value){var o=String(a.value),r=new Map(e.selectedLocations);if(!r.has(o)){if(r.set(o,a),e.maxLocations>0&&r.size>e.maxLocations){var l=Array.from(r.keys())[0];r.delete(l)}e.selectionChanged(r)}n(""),i("   "),t&&t.focus()}},[e,t,i]),S=s.useCallback(t=>{var s=t&&t.typeaheadjson&&t.typeaheadjson.length>0;s&&!l?(e.hasResultsChanged&&e.hasResultsChanged(!0),c(!0)):!s&&l&&(e.hasResultsChanged&&e.hasResultsChanged(!1),c(!1))},[e,l]),f=s.useCallback(t=>{var s=new Map(e.selectedLocations);s.delete(t),e.selectionChanged(s)},[e]),T=new F({interleaved:!0,types:K,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8,scoreThreshold:.8}),{localize:E}=y();return s.createElement(B,{fetchers:[T],onResultsChange:S},(l,c)=>(i=c,s.createElement("div",{className:"_11BSgfg5 "+(e.className?e.className:"")},s.createElement("div",{className:"_3x9To0Fn "+(o?"_2PdaRWGS":""),onClick:()=>t&&t.focus()},s.createElement("span",{className:"_3w2hINtg"},s.createElement(p,{name:"search"})),s.createElement(C,{inputComponentType:I,inputComponentClassName:"jPzIPtZX",value:a,onChange:e=>{u(!1),n(e)},onQueryChange:e=>{i(e)},onFocus:t=>{r(!0),e.onFocus&&e.onFocus(t)},onBlur:t=>{r(!1),e.onBlur&&e.onBlur(t)},searchDelay:50,placeholder:0===e.selectedLocations.size||e.selectedLocations.size===e.maxLocations?E.string("post_video_typeahead_placeholder_text_search"):E.string("post_video_location_typeahead_add_location"),onRef:e=>{t=e}})),l&&l.typeaheadjson&&l.typeaheadjson.length>0&&!d?s.createElement("div",{className:"_3Q3DVkWr"},s.createElement(g,null,l&&l.typeaheadjson?l.typeaheadjson.map(e=>(t,i)=>s.createElement(w,{result:e,tracker:m,onMouseMove:i,onSelection:v,active:t,key:"result="+e.value,includeIcon:!0})):[])):null,e.showLocationsAsPoiObjects?s.createElement(ae,{selectedLocations:e.selectedLocations,onClose:f}):Array.from(e.selectedLocations.entries()).map(([e,t])=>s.createElement("div",{className:h("_3c3idaal","_2nw7u-n5"),key:e,onClick:()=>f(e)},t.displayValue)))))},oe=e=>{var[t,i]=s.useState(e.selectedLocation.displayValue||""),a=new F({interleaved:!0,types:["geo"],filter:"cities"===e.mode?["nobroad"]:void 0,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:e.max}),{localize:n}=y(),o=[a];return e.includeWorld&&o.unshift(new D(n.string("dual_search_worldwide"))),s.createElement(ie,{fetchers:o,className:e.className,typeaheadTextInputValue:t,selectionChanged:t=>{e.selectionChanged(t),i(t.displayValue||"")},textInputChanged:t=>{e.textInputChanged&&e.textInputChanged(t),""===t&&e.selectionCleared&&e.selectionCleared(),i(t)},inputId:e.inputId,iconType:e.iconType,placeHolder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,closeDropdownOnClickOutside:e.closeDropdownOnClickOutside,resultsAbove:e.resultsAbove},(e,t,i)=>s.createElement(g,null,[...e.worldwide||[],...e.typeaheadjson||[]].map(e=>(a,n)=>s.createElement(w,{result:e,tracker:t,onMouseMove:n,onSelection:i,active:a,key:"result="+e.value,includeIcon:!0}))))};return[()=>{e("TypeaheadTextInput",C=class extends s.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{if(this.props.onChange&&this.props.onChange(t),(!e||e.keyCode!==d.KEY_ENTER)&&this.currentQuery!==t){if(e)switch(e.keyCode){case d.KEY_DOWN:case d.KEY_UP:case d.KEY_ESCAPE:case d.KEY_TAB:case d.KEY_CAPSLK:case d.KEY_LEFT:case d.KEY_RIGHT:case d.KEY_META:case d.KEY_SHIFT:case d.KEY_CTRL:return}this.updateSearchTimeout&&clearTimeout(this.updateSearchTimeout),this.currentQuery=t,this.updateSearchTimeout=setTimeout(()=>{this.props.onQueryChange&&this.props.onQueryChange(t)},this.props.searchDelay)}},this.updateSearchTimeout=void 0,this.currentQuery=void 0}render(){var e={id:this.props.id,name:this.props.name,value:this.props.value,type:this.props.type,className:this.props.inputComponentClassName,fontSize:this.props.fontSize,lineHeight:this.props.lineHeight,placeholder:this.props.placeholder,onChange:this.onChange,onKeyUp:this.onChange,onCompositionEnd:this.onChange,onInteractionStart:this.props.onInteractionStart,onSelect:this.props.onSelect,onFocus:this.props.onFocus,onBlur:this.props.onBlur,focusOnMount:this.props.focusOnMount,focusOnUpdate:this.props.focusOnUpdate,onRef:this.props.onRef,hideAutoComplete:this.props.hideAutoComplete,autoCompleteIdentifier:this.props.autoCompleteIdentifier,disabled:this.props.disabled};return s.createElement(this.props.inputComponentType,e)}}),C.defaultProps={name:void 0,value:void 0,type:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,hideAutoComplete:!1,autoCompleteIdentifier:void 0,searchDelay:250,onQueryChange:void 0,onInteractionStart:void 0,onFocus:void 0,onBlur:void 0,onRef:void 0,onSelect:void 0,disabled:!1},e("TypeaheadTextArea",k=class extends s.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{if(this.props.onChange&&this.props.onChange(e,t),(!e||e.keyCode!==d.KEY_ENTER)&&this.currentQuery!==t){if(e)switch(e.keyCode){case d.KEY_DOWN:case d.KEY_UP:case d.KEY_ESCAPE:case d.KEY_TAB:case d.KEY_CAPSLK:case d.KEY_LEFT:case d.KEY_RIGHT:case d.KEY_META:case d.KEY_SHIFT:case d.KEY_CTRL:return}this.updateSearchTimeout&&clearTimeout(this.updateSearchTimeout),this.currentQuery=t,this.updateSearchTimeout=setTimeout(()=>{this.props.onQueryChange&&this.props.onQueryChange(t)},this.props.searchDelay)}},this.updateSearchTimeout=void 0,this.currentQuery=void 0}render(){var e={id:this.props.id,name:this.props.name,value:this.props.value,className:this.props.inputComponentClassName,rows:this.props.rows,cols:this.props.cols,placeholder:this.props.placeholder,disabled:this.props.disabled,focusOnMount:this.props.focusOnMount,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onChange:this.onChange,onKeyUp:this.onChange,onKeyDown:this.onChange,onCompositionEnd:this.onChange,onInteractionStart:this.props.onInteractionStart,onRef:this.props.onRef,maxLength:this.props.maxLength,autoCompleteIdentifier:this.props.autoCompleteIdentifier,hideAutoComplete:this.props.hideAutoComplete};return s.createElement(this.props.inputComponentType,e)}}),k.defaultProps={name:void 0,value:void 0,placeholder:void 0,focusOnMount:!1,focusOnUpdate:!1,searchDelay:250,onQueryChange:void 0,onInteractionStart:void 0,onFocus:void 0,onBlur:void 0,onRef:void 0},e("TypeaheadTracking",N=class{constructor(e,t){this.interactionStart=void 0,this.uiOrigin=void 0,this.searchSessionId=void 0,this.setInteractionStart=e=>{this.interactionStart=e},this.createTrackingData=({eventType:e,userInteractionType:t,selectedItem:s})=>{var i=s&&s.query,a=s&&s.value,n=s&&s.url,o=s&&s.resultIndex,r=s&&s.type,l=s&&s.data_type,c=s&&s.totalCount,d=s&&s.document_id,u={action:"RECORD",eventType:e,uiOrigin:this.uiOrigin,type:r,value:a,source:this.uiOrigin,startTime:String(this.interactionStart),selDepth:isNaN(o)?void 0:o+1,isChild:"false",totalNum:c?String(c):void 0,userInteractionType:t,scope:"1",query:i,dataType:l,url:n,searchSessionId:this.searchSessionId,documentId:d},h={};return Object.keys(u).forEach(e=>{null!=u[e]&&(h[e]=String(u[e]))}),h},this.ajaxTrack=e=>{var t=this.createTrackingData(e);fetch("/TypeAheadJson?"+new URLSearchParams(t).toString(),{credentials:"same-origin"})},this.trackInteractionStart=()=>{this.ajaxTrack({eventType:"start",userInteractionType:"start"})},this.trackSelection=(e,t)=>{this.ajaxTrack({eventType:"select",userInteractionType:t,selectedItem:e})},this.uiOrigin=e,this.searchSessionId=t}}),e("GeoNaviFetcher",R=class{constructor({geoId:e,limit:t}){this.id="geonavi",this.geoId="1",this.limit=26,this.cache={},this.results=null,this.stack=[],e&&(this.geoId=e),t&&(this.limit=t)}getResults(){return this.results}fetch(e,t,s){this.onContextChange(t,s)}onContextChange(e,t){if(e&&e.geoNaviId){var s=e.geoNaviId;"1"===s?this.stack=[]:-1!==this.stack.indexOf(s)?this.stack=this.stack.slice(0,this.stack.indexOf(s)):this.stack.push(this.geoId),this.geoId=s;var i=this.cache[this.geoId];if(i){if(i instanceof Promise)return;return this.results=i,void t()}var a=new URLSearchParams({action:"GEONAVI",geoID:this.geoId}),{geoId:n}=this;this.cache[n]=fetch("/TypeAheadJson?"+a.toString(),{method:"GET",credentials:"same-origin"}).then(e=>{if(e.ok)return e;throw Error(e.statusText)}).then(e=>e.json()).then(e=>e.results.map((e,t)=>{var s=String(e.id)===n?this.stack[this.stack.length-1]:String(e.id),i=0===t&&1!==parseInt(this.geoId,10);return{name:e.displayName,geoId:s,back:i,forward:!i&&!e.isLeaf}})).then(e=>(this.results=e.slice(0,this.limit),this.cache[n]=this.results,t(),this.results)).catch(()=>(this.results=[],t(),this.results))}}}),e("SponsoredGeoFetcher",_=class{constructor(e){this.id="sponsoredgeo",this.sponsorData=void 0,this.onChange=void 0,e(e=>{this.sponsorData=e,this.onChange&&this.onChange()})}getResults(){if(this.sponsorData){var{name:e,location_id:t,ancestors:s,dfpTrackingUrl:i,thirdPartyClickTrackerURL:a}=this.sponsorData;return[{name:e,location_id:t,ancestors:s?s.map(e=>({name:e})):[],dfpTrackingUrlTemplate:i?i+"${destUrl}":null,thirdPartyClickTrackerURL:a}]}return[]}fetch(e,t,s){this.onChange=s,s()}}),e("RecentlyViewedFetcher",O=class{constructor({categories:e,limit:t}){this.id=H,this.categories=void 0,this.limit=10,this.results=null,this.inFlight=!1,e&&(this.categories=e),t&&(this.limit=t)}getResults(){return this.results}fetch(e,t,s){if(!this.inFlight&&null===this.results){var i=new URLSearchParams({limit:String(this.limit)});this.categories&&this.categories.forEach(e=>i.append("categories[]",e)),this.inFlight=!0,fetch("/data/1.0/recent?"+i.toString(),{method:"GET",credentials:"same-origin"}).then(e=>{if(e.ok)return e;throw Error(e.statusText)}).then(e=>e.json()).then(e=>{this.results=e.data.map(e=>Object.assign({resultType:e.result_type},e.result_object)),this.inFlight=!1,s()}).catch(e=>{console.error("recentPrefill",e),this.results=[],this.inFlight=!1,s()})}}}),e("GeoThemeFetcher",x=class{constructor({theme:e,limit:t}){this.id="geotheme",this.theme=0,this.limit=10,this.results=null,this.inFlight=!1,e&&(this.theme=e),t&&(this.limit=t)}getResults(){return this.results}fetch(e,t,s){if(!this.inFlight&&null===this.results){var i=new URLSearchParams({geoThemeId:String(this.theme),limit:String(this.limit)});this.inFlight=!0,fetch("/data/1.0/destinations/bundle?"+i.toString(),{method:"GET",credentials:"same-origin"}).then(e=>{if(e.ok)return e;throw Error(e.statusText)}).then(e=>e.json()).then(e=>{this.results=e.geos,this.inFlight=!1,s()}).catch(e=>{console.error("Could not fetch geo theme typeahead results.",e),this.results=[],this.inFlight=!1,s()})}}}),e("TypeaheadJsonFetcher",F=class{constructor(e){this.id=z,this.props=void 0,this.cache=void 0,this.mostRecentTerm=void 0,this.results=null,this.additionalParams=void 0,this.props=e,void 0===this.props.cache&&(this.props.cache=!0),this.props.cache&&(this.cache={})}setAdditionalParams(e){this.additionalParams=e}getResults(){return this.results}fetch(e,t,s){if(this.mostRecentTerm=e,u(e)<3)null!==this.results&&(this.results=null,s());else if(this.cache&&this.cache[e]){var i=this.cache[e];this.results!==i&&(this.results=i,s())}else{var a={action:"API",query:e};Object.keys(this.props).filter(e=>"cache"!==e).forEach(e=>{var t=this.props[e];t&&(Array.isArray(t)?a[e]=t.join(","):a[e]=String(t))}),this.additionalParams&&(a=Object.assign({},a,{},this.additionalParams)),fetch("/TypeAheadJson?"+new URLSearchParams(a).toString(),{method:"GET",credentials:"same-origin"}).then(e=>{if(e.ok)return e;throw Error(e.statusText)}).then(e=>e.json()).then(t=>{t&&this.cache&&(this.cache[e]=t),e===this.mostRecentTerm&&(t?(this.results=t.map(e=>Object.assign({},e,{query:this.mostRecentTerm})),s()):this.results=[])}).catch(()=>{this.results=[],s()})}}}),F.defaultProps={scope:1,beforeGeoId:1,afterGeoId:1},J.defaultProps={subtitle:void 0,active:void 0,iconName:void 0,verifiedIcon:!1,chevronName:void 0,paddingStyle:void 0,isRescue:!1,reverseSubtitle:!1},e("GeoNaviResult",b=class extends s.Component{constructor(...e){super(...e),this.onSelection=e=>{if(this.props.onSelection&&"function"==typeof this.props.onSelection){var{result:{geoId:t,back:s,forward:i}}=this.props,a=s||i?"geonavi":"location_id";this.props.onSelection(e,{type:a,value:t})}}}render(){var e;return this.props.result.back?e="single-chevron-left":this.props.result.forward&&(e="single-chevron-right"),s.createElement(m,{onSelection:this.onSelection,onMouseMove:this.props.onMouseMove,active:!!this.props.active},s.createElement(J,{title:this.props.result.name,chevronName:e,active:!!this.props.active}))}}),b.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1},q.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1,resultIndex:void 0},$.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1},Z[v]=!0,e("RecentlyViewedResult",A=class extends s.Component{constructor(...e){super(...e),this.onSelect=e=>{var t="click"===e.type?"click":"enter",{tracker:s,onSelection:i,result:a,resultIndex:n}=this.props,{location_id:o,resultType:r}=this.props.result;s.trackSelection(Object.assign({document_id:o,data_type:"LOCATION",fromHistory:!0,type:ee[r]||r,resultIndex:n},a),t),i&&i(e,{type:"recent_location_id",value:o})},this.iconFromCategoryKey=e=>{switch(e){case"attraction":return"attractions";case"hotel":return"hotels";case"restaurant":return"restaurants";case"geographic":default:return"map-pin-fill"}}}render(){var e,t,i,{result:a}=this.props,{name:n,category:o,ancestors:r=[]}=a,l=V(this.props.addressDisplay,null==(e=r[0])?void 0:e.name,null==(t=r[1])?void 0:t.name,null==a||null==(i=a.address_obj)?void 0:i.street1),c=this.props.includeIcon?this.iconFromCategoryKey(o&&o.key||""):"";return s.createElement(m,{active:!!this.props.active,onMouseMove:this.props.onMouseMove,onSelection:this.onSelect},s.createElement(J,{title:n,subtitle:l,iconName:c,active:this.props.active,paddingStyle:this.props.paddingStyle}))}}),A.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1,includeIcon:!1,paddingStyle:void 0,addressDisplay:"parent_geos",resultIndex:void 0},e("GeoThemeResult",M=class extends s.Component{constructor(...e){super(...e),this.onSelect=e=>{var t="click"===e.type?"click":"enter",{tracker:s,onSelection:i,result:a,resultIndex:n}=this.props;s.trackSelection(Object.assign({resultIndex:n},a),t);var{location_id:o}=a;i&&i(e,{type:"geo_theme_location_id",value:o})}}render(){var e,{name:t}=this.props.result,i=this.props.result.ancestors?this.props.result.ancestors.length:0;return i>1?e=`${this.props.result.ancestors[0].name}, ${this.props.result.ancestors[1].name}`:i>0&&(e=this.props.result.ancestors[0].name),s.createElement(m,{active:!!this.props.active,onMouseMove:this.props.onMouseMove,onSelection:this.onSelect},s.createElement(J,{title:t,subtitle:e,active:this.props.active}))}}),M.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1,resultIndex:void 0},te[v]=!0,e("TypeaheadJsonResult",w=class extends s.Component{constructor(...e){super(...e),this.onSelect=e=>{var t="click"===e.type?"click":"enter",{tracker:s,onSelection:i,itemType:a,result:n,resultIndex:o}=this.props,r=Object.assign({resultIndex:o},n);s.trackSelection(r,t);var{value:l,scope:c,name:d}=n;i&&i(e,{type:a,value:l,displayValue:d,scope:c})}}render(){var e=this.props.result.details||{},t=e.name,i=V(this.props.addressDisplay,e.parent_name,e.grandparent_name,e.address),a=this.props.includeIcon?W(this.props.result.type):"";return s.createElement(m,{onSelection:this.onSelect,onMouseMove:this.props.onMouseMove,active:this.props.active},s.createElement(J,{title:t,subtitle:i,iconName:a,active:this.props.active,paddingStyle:this.props.paddingStyle}))}}),w.defaultProps={onSelection:void 0,onMouseMove:void 0,active:!1,includeIcon:!1,addressDisplay:"parent_geos",paddingStyle:void 0,itemType:"location_id",resultIndex:void 0},(P=class extends s.Component{constructor(...e){super(...e),this.state={closed:!1,inputFocused:!1,resultSelected:!1},this.onSelection=(e,t)=>{this.setState({closed:!1,resultSelected:!0}),this.setSelection(t)},this.onFocus=e=>{this.setState({closed:!1,inputFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.onBlur=e=>{this.setState({inputFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.setSelection=e=>{e&&(this.updateSearch(""),this.textInput&&this.textInput.focus(),this.props.selectionChanged(e))},this.handleOnKeyDown=e=>{e.keyCode===d.KEY_TAB&&this.props.closeDropdownOnClickOutside&&this.setState({closed:!0})},this.tracker=new N("",""),this.textInput=void 0,this.updateSearch=void 0,this.hasMounted=!1}componentDidMount(){this.hasMounted=!0}componentWillUnmount(){this.hasMounted=!1}render(){var e=this.props.placeHolder||this.props.localize.string("common_Search");return s.createElement(s.Fragment,null,s.createElement(B,{filters:this.props.filters,fetchers:this.props.fetchers},(t,i)=>{this.updateSearch=i;var a=t&&Object.keys(t).filter(e=>{return!(!(s=t[e])||0===s.length);var s}).length>0,n=this.props.handleEmptyResult&&t.typeaheadjson&&!t.typeaheadjson.length;return s.createElement("div",{className:"_3MbSn5R5",onKeyDown:this.handleOnKeyDown},s.createElement("span",{className:"_3UtySP-H"},s.createElement(p,{name:this.props.iconType?this.props.iconType:"search",size:18})),s.createElement(C,{inputComponentType:I,inputComponentClassName:h("Kg5KBNFp","_1ZeS63zy",this.props.className),id:this.props.inputId,value:this.props.typeaheadTextInputValue,type:this.props.inputType,onChange:e=>{this.setState({closed:!1,resultSelected:!1}),this.props.textInputChanged(e)},onQueryChange:e=>{i(e)},onFocus:this.onFocus,onBlur:this.onBlur,searchDelay:50,placeholder:e,onRef:e=>{this.textInput=e,this.props.onRef(e)},autoCompleteIdentifier:this.props.autoCompleteIdentifier,hideAutoComplete:this.props.hideAutoComplete}),(a||n)&&!1===this.state.resultSelected&&!this.state.closed&&s.createElement("div",{className:h("_2sFgES0v",{_3jJGWd2r:this.props.resultsAbove})},this.props.children(t,this.tracker,this.onSelection)))}),s.createElement(f,{event:"click",callback:()=>{this.hasMounted&&this.props.closeDropdownOnClickOutside&&!this.state.inputFocused&&this.setState({closed:!0})}}))}}).defaultProps={placeHolder:null,className:void 0,inputType:void 0,iconType:"search",onFocus:void 0,onBlur:void 0,itemType:"location_id",onRef:()=>{},closeDropdownOnClickOutside:!0,resultsAbove:!1},ie.defaultProps={placeHolder:null,className:void 0,inputId:void 0,inputType:void 0,iconType:"search",onFocus:void 0,onBlur:void 0,itemType:"location_id",onRef:()=>{},closeDropdownOnClickOutside:!0,resultsAbove:!1},(L=class extends i.Component{constructor(...e){super(...e),this.state={textInputValue:this.props.selectedLocation.displayValue||""},this.onResultSelected=e=>{this.props.selectionChanged(e),this.setState({textInputValue:this.props.clearValueOnSelection?"":e.displayValue||""})},this.getTypeaheadJsonFetcher=()=>new F({interleaved:!0,types:this.props.locationTypes,name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:this.props.max,scoreThreshold:.8,parentids:this.props.parentids||[],scope:1,beforeGeoId:1,afterGeoId:1}),this.textInputChanged=e=>{this.setState({textInputValue:e})},this.typeaheadJsonFetcher=this.getTypeaheadJsonFetcher()}componentDidUpdate(e){var t,s;(t=e.parentids||[])===(s=this.props.parentids||[])||t.length===s.length&&t.every((e,t)=>e===s[t])||(this.typeaheadJsonFetcher=this.getTypeaheadJsonFetcher())}render(){var{trailingItem:e}=this.props;return i.createElement(ie,{fetchers:[this.typeaheadJsonFetcher],typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,className:this.props.className,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeHolder:this.props.placeHolder,handleEmptyResult:this.props.handleEmptyResult,onRef:e=>{this.props.onRef&&this.props.onRef(e)},closeDropdownOnClickOutside:this.props.closeDropdownOnClickOutside},(t,s,a)=>{var n=[];return n=t.typeaheadjson&&!t.typeaheadjson.length?[(e,t)=>i.createElement(m,{onMouseMove:t,key:"result='no-result'"},i.createElement(Z,{small:!0}))]:[...t.typeaheadjson||[]].map(e=>(t,n)=>i.createElement(w,{addressDisplay:this.props.addressDisplay,result:e,tracker:s,onMouseMove:n,onSelection:a,active:t,key:"result="+e.value,includeIcon:!0})),e&&n.push(e),i.createElement(g,null,n)})}}).defaultProps={locationTypes:K,className:void 0,onFocus:void 0,onBlur:void 0,placeHolder:void 0,clearValueOnSelection:!1,parentids:[],addressDisplay:"parent_geos",trailingItem:void 0,max:8,handleEmptyResult:!1,onRef:()=>{},closeDropdownOnClickOutside:!0},(G=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"LocationDetails"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationIds"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locationIds"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"placeType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"thumbnail"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"photoSizes"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"width"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"height"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"isHorizontal"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"parent"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]}]}}]}},{"kind":"Field","name":{"kind":"Name","value":"additionalNames"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"long"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":380}}')).__key=0xca54a541710f,ae.defaultProps={onClose:void 0},ne.defaultProps={hasResultsChanged:null,maxLocations:0,className:void 0,onFocus:void 0,onBlur:void 0,showLocationsAsPoiObjects:!0},e("WorldwideFetcher",D=class{constructor(e){this.id="worldwide",this.results=null,this.name="",this.name=e}getResults(){return this.results}fetch(e,t,s){var{name:i}=this;this.results=e.length<3||this.name.toLowerCase().indexOf(e.toLowerCase())<0?null:[{type:"GEO",value:"1",displayValue:i,details:{name:i}}],s()}}),oe.defaultProps={mode:"all",includeWorld:!0,selectionCleared:()=>{},textInputChanged:()=>{},iconType:"search",placeholder:void 0,max:8,onBlur:void 0,onFocus:void 0,closeDropdownOnClickOutside:!0,resultsAbove:!1},e("POISelector",j=class extends s.Component{constructor(...e){super(...e),this.state={textInputValue:""},this.onResultSelected=e=>{this.props.selectionChanged(e),this.setState({textInputValue:e.displayValue||""})},this.typeaheadJsonFetcher=new F({interleaved:!0,types:["hotel","attr","eat"],filter:["nobroad"],name_depth:1,details:!0,legacy_format:!0,urlList:!1,max:8}),this.textInputChanged=e=>{this.setState({textInputValue:e})}}render(){return s.createElement(ie,{fetchers:[this.typeaheadJsonFetcher],typeaheadTextInputValue:this.state.textInputValue,selectionChanged:this.onResultSelected,textInputChanged:this.textInputChanged,placeHolder:this.props.placeholderText},(e,t,i)=>s.createElement(g,null,[...e.typeaheadjson||[]].map(e=>(a,n)=>s.createElement(w,{result:e,tracker:t,onMouseMove:n,onSelection:i,active:a,key:"result="+e.value,includeIcon:!0}))))}}),e({BasicResult:J,GeoNaviFetcher:R,GeoNaviFetcherId:"geonavi",GeoNaviResult:b,GeoSelector:oe,GeoThemeFetcher:x,GeoThemeFetcherId:"geotheme",GeoThemeResult:M,GoNearbyResult:q,GoWorldwideResult:$,LoadingResult:X,LocationSelector:L,MultiLocationSelector:ne,NoResults:Z,POIObjectList:ae,POISelector:j,RecentlyViewedFetcher:O,RecentlyViewedFetcherId:H,RecentlyViewedResult:A,RescueResult:se,SectionTitle:te,Selector:ie,SponsoredGeoFetcher:_,SponsoredGeoFetcherID:"sponsoredgeo",Typeahead:B,TypeaheadJsonFetcher:F,TypeaheadJsonFetcherId:z,TypeaheadJsonResult:w,TypeaheadTextArea:k,TypeaheadTextInput:C,TypeaheadTracking:N,WorldwideFetcher:D,getIconFromResultType:W,getIconNameFromResultType:Q})},[e=>(s=e,i=e.default,a=e.useState,n=e.useRef,o=e.useEffect,r=e.useMemo,l=e.useCallback),e=>c=e.default,e=>d=e,e=>u=e.inputLength,e=>h=e.default,e=>p=e.default,e=>(m=e.NavigableListItem,v=e.NonNavigableItem,g=e.NavigableList),e=>y=e.useLocalize,e=>S=e.default,e=>I=e.ManagedTextInput,e=>f=e.default,e=>T=e.useQuery,e=>E=e.ResponsiveImage]]},["cDcdfi","ABlMo4","h7E4Ym","O-HcBE","jSLlaY","pyY-iJ","Erjc5t","0DsHEV","Xi-2HZ","qfSfGN","Dg5_-9","5X2em-","KwOV1Z"]]);
