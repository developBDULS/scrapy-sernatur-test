(this.$WP=this.$WP||[]).push(["vgue-2",(e,r)=>{"use strict";var t,o,i,a,l,s,n,c,f,m,p,u,d,g,v,k,_,O,C=(e,r)=>{e.persist();var{require:t}=window;t&&t(["trjs!commerce/offerclick"],t=>{t.clickEvent(e.nativeEvent,e.currentTarget,r)})},h=e=>{var r=p(e.offers),k=u(e.offers),_=!!(k&&r&&.97*k.price>r.price),O=n(),C=i(e.trackingProps),{userId:h}=o(g),[{page:E}]=o(v),P=a(),w=!!h,{listingKey:I,locationId:y}=e,{login:T}=d({allowClose:!0,forceLogin:!1,contextualMessageKey:"plus_login_header_copy1_new"});if(r){var b=O.formatCurrencyInteger(r.price),S=t=>{C(),e.preOfferClick&&e.preOfferClick(r),e.onOfferClick(t,r.offerClickToken),(e=>{e.stopPropagation()})(t)},D=!e.suppressCommerce,H=D?S:r=>((e,r,t)=>{C(),window.open(r,"_blank"),e.stopPropagation()})(r,e.hotelReviewUrl),N=H;r.isOptimusOffer&&(N=e=>{((e,r,t)=>{e.persist(),r?globalThis.require(["trjs!commerce/offerclick"],e=>{var o=e.expandToken(r);t(o.ik)}):t(null)})(e,r.offerClickToken,t=>{P({Hotels:{ViewDealClick:{action:"TODO: PLUS-3061 @mkosko",isMemberSignedIn:w,funnelKey:t,servletName:E,savingsAmount:r.savingsPrice,locationId:y,listingKey:I}}}),w?H(e):(e=>{C(),T(()=>{window.location.reload()}),e.stopPropagation()})(e)})});var K=r.isOptimusOffer?t.createElement(c,{offer:r}):t.createElement(f,{commerceSupport:D,bestOffer:r,worstOfferPrice:k?k.price:void 0,showWorstOffer:_,priceSize:e.priceSize,premiumPrice:b,onOfferClick:S}),R=t.createElement(m,{offer:r,disableTooltip:e.disableOptimusPerkTooltip,hotelReviewUrl:e.hotelReviewUrl});return t.createElement("div",{className:"_1MDua2Xr"},t.createElement("div",{className:"_3Kx3p-c_"},K),t.createElement("div",{className:"_1Dq051wS"},t.createElement(l,{onClick:N,legacyStyled:!0,variant:"commerce",size:"small"},t.createElement(s,{id:"view_deal_button_cta"})," ")),t.createElement("div",{className:"_3GBCCEXN"},r&&r.isOptimusOffer&&R))}var x=e.offers&&0===e.offers.length?t.createElement(s,{id:"meta_ui_contact_hotel_c2b"}):t.createElement(s,{id:"no_availailability_from_partners"});return t.createElement("div",{className:"_1MDua2Xr"},t.createElement("span",{className:"_2rks91e2"},x))},E=e=>{var[r,o]=t.useState(1),[i]=t.useContext(v),a=()=>{o(r+1)},{locationId:l}=e,s=0===i.page.trim().length?"WebComponentMap":i.page;return t.createElement(O,{url:`/data/1.0/mapsEnrichment/hotel/${l}?rn=${r}&rc=${s}&stayDates=&guestInfo=`,parser:(e,t)=>{if(e){var{hotels:o,hacStatus:i}=e,a=i&&(i.isHacComplete||i.hacPercentComplete>90);if(o&&1===o.length){var l=o[0];return{offers:l.offers&&l.offers.filter(e=>!!e.providerInfo).map(e=>({offerClickToken:e.offerClickToken,price:e.price,status:e.status,provider:e.providerInfo.name,isInstantBook:e.providerInfo.isInstantBook})),complete:a||r>=5}}}return{offers:[],complete:!!t}}},o=>{var i,{loading:l,data:s}=o;return i=s&&(s.complete||p(s.offers||[]))?t.createElement(h,{locationId:e.locationId,offers:s.offers||[],trackingProps:e.trackingProps,hotelReviewUrl:e.hotelReviewUrl,suppressCommerce:e.suppressCommerce,listingKey:e.listingKey}):t.createElement("div",{style:{width:"100%"}},t.createElement(_,{size:"small"})),t.createElement(t.Fragment,null,t.createElement(k,{loading:l,complete:!!s&&s.complete,requestNumber:r,poll:a}),i)})};return[()=>{h.defaultProps={offers:[],trackingProps:{module:"maps_hotel_offer",action:"commerce_click"},onOfferClick:C,preOfferClick:()=>{},priceSize:20},E.defaultProps={trackingProps:{module:"deferred_hotel_offer",action:"commerce_click"}},e({DeferredHotelOffer:E,HotelOffer:h})},[e=>(t=e,o=e.useContext),e=>(i=e.useGARecordCallback,a=e.useInteractionLogger),e=>l=e.default,e=>(s=e.default,n=e.useIntlFormatter),e=>(c=e.OptimusHotelOfferPrice,f=e.HotelOfferPrice,m=e.OptimusHotelOfferMessage),e=>(p=e.findFirstOffer,u=e.findWorstOffer),e=>d=e.useOptimusLogin,e=>(g=e.Visitor,v=e.Route),e=>k=e.default,e=>_=e.LoadingSpinner,e=>O=e.default]]},["cDcdfi","fsml46","7yGKf-","0DsHEV","9TT7ph","fTsrJe","mT-Pb2","2R4xv2","FHZ_Dz","V08PS7","w_dosq"]]);
