(this.$WP=this.$WP||[]).push(["MG7IEl",(e,t)=>{"use strict";var r,a,n,o,i,s,l,d,u,c,m,g,v,p,f,h,E,I,y,P,w,C,b,A,R,D,T,_,O,S,k,M,N,x,$,U,W,j,B,H,L,q,z,G,V,F,X,K,J,Q,Y,Z,ee,te,re,ae,ne,oe,ie,se,le,de,ue,ce,me,ge,ve,pe,fe,he,Ee,Ie,ye,Pe,we,Ce,be,Ae,Re,De,Te,_e,Oe,Se,ke,Me,Ne,xe,$e,Ue,We,je,Be,He=({children:e})=>e,Le=({children:e})=>{var{browser:t,userAgentCategory:r}=o(H),{domainName:n}=o(L),[l,d]=i(null),[u,c]=i(!1);return s(()=>{if(be)d(be);else{var e="MOBILE"===r?window.innerHeight:window.innerHeight/2,a=.01*window.innerHeight,o={userAgentCategory:r,fetchMargin:e+"px",renderMargin:a+"px",browserFamily:t.family,domainName:n};if(ve.get(pe))be=new fe(o),c(!0);else if(E("rubicon_header_bidding")||E("amazon_header_bidding")){var i=[];E("amazon_header_bidding")&&i.push(new he(o)),E("rubicon_header_bidding")&&i.push(new Ee(o)),be=new Ie(o,i)}else be=new ye(o);d(be)}},[t,r,n]),a.createElement(Pe.Provider,{value:l},a.createElement(we,null,u&&a.createElement(Ce,{onDisableTestMode:()=>{ve.remove(pe),window.location.reload()}}),a.createElement(Ae,null,e)))},qe=(e,t)=>fetch(`/UpdateSessionDatesAjax?${e}=${t}`,{credentials:"same-origin"}),ze=({stayDates:e,guests:t,defaultDates:r})=>{var a=ne(e),n=oe(t);return a&&n&&a.checkInDate&&a.checkOutDate?{checkInDate:a.checkInDate,checkOutDate:a.checkOutDate,defaultDates:r,rooms:n.rooms,adults:n.adults,children:n.children,childAgesPerRoom:n.childAgesPerRoom}:null},Ge=({preferencesTravelInfo:e,attractionsTravelInfo:t,hotelsTravelInfo:a,restaurantsDate:n,flightsTravelInfo:o,setRestaurantsDate:i,setHotelsTravelInfo:s,setAttractionsTravelInfo:l,setFlightsTravelInfo:d,children:u})=>{var c=r.useMemo(()=>e&&"string"==typeof e.currency?e:{currency:"USD"},[e]),m=r.useMemo(()=>((e,t,r,a,n)=>({preferences:{setCurrency:t=>{globalThis.require(["trjs!ta/util/Currency"],r=>r.setCurrencyAndReload(t,e))}},attractions:{setSingleDate:e=>{t(re(e,"-")),qe("attrdate",null===e?"_":re(e))},setDates:(e,r)=>{t(void 0,re(e,"-"),re(r,"-")),qe("attrrange",`${re(e)}_${re(r)}`)},setPassengers:(e,r)=>{t(void 0,void 0,void 0,e,r),qe("zuf",`${e}_${r}`)}},restaurants:{setDate:e=>{e&&(r(e,w.formatDate("week_date_short",e)),qe("eaterydate",re(e)))},setTime:()=>{},setGuests:()=>{},clearAll:()=>{}},hotels:{setStayDates:(e,t)=>{var r=`${re(e)}_${re(t)}`;a(r),qe("staydates",r)},setGuestInfo:(e,t,r)=>{var n=`${t}_${e}${r.length>0?"_"+r.map(e=>e.join(",")).join(":"):""}`;a(void 0,n),qe("uguests",n)},setTravelInfo:()=>{}},flights:{setOneWayDate:e=>{n(re(e)),qe("oneway",re(e))},setRoundTripDates:(e,t)=>{n(void 0,re(e),re(t)),qe("rtdates",`${re(e)}_${re(t)}`)},setOriginAirportCode:e=>{n(void 0,void 0,void 0,e),qe("flightorig",e)},setDestinationAirportCode:e=>{n(void 0,void 0,void 0,void 0,e),qe("flightdest",e)},setTravelerInfo:()=>{throw new Error("Not implemented: flights.setTravelerInfo is only supported in lithium")}}}))(c.currency,l,i,s,d),[c.currency,l,i,s,d]),g=r.useMemo(()=>Object.assign({},(({preferences:e,hotels:t,restaurants:r,attractions:a,flights:n})=>({preferences:e,attractions:{singleDate:ae(a.singleDate,"-"),fromDate:ae(a.fromDate,"-"),toDate:ae(a.toDate,"-"),adults:a.attractionPaxAdults,children:a.attractionPaxChildren},restaurants:{date:ae(r.date,"-")},hotels:t?ze(t):null,flights:{oneWayDate:ae(n.oneWayDate,"-"),departureDate:ae(n.departureDate,"-"),returnDate:ae(n.returnDate,"-"),originAirportCode:n.originAirportCode,destinationAirportCode:n.destinationAirportCode,adults:1,seniors:0,childAges:[],classOfService:null}}))({preferences:c,attractions:t||{},hotels:a,restaurants:{date:n},flights:o||{}}),{update:m}),[c,t,a,n,o,m]);return r.createElement(q.Provider,{value:g},u)},Ve=e=>{var t=(()=>{var{userId:e}=r.useContext(z),[t]=r.useContext(G),a=r.useContext(V),n=t.params.geoId||-1;return r.useCallback(r=>e&&!r.forceLogin?Promise.resolve({userId:e,hasCreatedMember:null}):new Promise(e=>{if(se()&&"undefined"!=typeof window&&(window.location=`/RegistrationController?flow=${encodeURIComponent(r.flow||"CORE_COMBINED")}&pid=${encodeURIComponent(String(r.pid||-1))}&returnTo=${encodeURIComponent(t.path)}&fullscreen=true`),ie.isNativeWebview())ie.showRegistration(!1);else{var o={flow:r.flow||"CORE_COMBINED",pid:r.pid||-1,userRequestedForce:!0,extraQueryParams:Object.assign({flowOrigin:r.flowOrigin||"join"},r.extraQueryParams),displayOnShowOverlay:r.deferShowOverlay||!1,locationId:n,requireSecure:r.requireSecure||!1,onSuccess:t=>{var n={userId:(null==t?void 0:t.user_id)?""+t.user_id:null,hasCreatedMember:!!(null==t?void 0:t.hasCreatedMember),loginProvider:null==t?void 0:t.loginProvider};r.onSuccess&&r.onSuccess(n),a({userId:n.userId}),e(n)},onClose:r.onClose,closeX:!1!==r.closeX,closeOnDocClick:!1!==r.closeOnDocClick,windowShadeOption:r.windowShadeOption||"light"};globalThis.require(["trjs!ta/registration/RegOverlay"],e=>{r.onLogin&&r.onLogin(),e.showRegOverlayByPageModel(null,null,window.require("page-model"),o)})}}),[e,n,a,t.path])})(),{login:a}=le(),n=E("apr_lithium_control")?a:t;return r.createElement(de.Provider,{value:n},e.children)},Fe=(e,t)=>e.page===(null==t?void 0:t.page)&&ue(e.params,null==t?void 0:t.params),Xe=(e,t)=>{try{switch(t){case"FRAGMENT_PUSH":case"PARAM_UPDATE":history.pushState(e,"",e.path);break;case"PAGE_VIEW":history.pushState(e,"",e.path),window.scroll(0,0);break;case"IN_PLACE":history.replaceState(e,"",e.path);break;case"INITIAL":case"POP":break;default:return}}catch(e){console.error("Caught exception while accessing History API:",e)}},Ke=(e,t)=>`${-1===e.indexOf("#")?e:e.split("#")[0]}${""!==(t||"")?"#"+(t||""):""}`,Je=({children:e})=>((()=>{var[e,{navigate:t}]=o(G);s(()=>{var r=r=>{var a=r.state;(null==a?void 0:a.params)&&(e.path!==a.path||e.page!==a.page||!ue(e.params,a.params)||e.fragment!==a.fragment)&&t(a,"POP")};return window.addEventListener("popstate",r,!1),()=>{window.removeEventListener("popstate",r,!1)}},[e,t])})(),e),Qe=({children:e,lithiumRouteContext:t,legacyRoute:r,lithiumNavigateAction:n,legacyNavigateAction:o})=>{var[u,c]=t,[m]=i(u),g=ce();s(()=>{var{path:e}=m;window.location.pathname+window.location.search===e&&me(g,m,!1).then(e=>{history.replaceState(e,"",e.path)})},[g,n,m]);var v=l((e,t="FRAGMENT_PUSH")=>{var r=e||"";if(r!==u.fragment){var a=Object.assign({},u,{path:Ke(u.path,r),fragment:r});n(a),Xe(a,t)}},[n,u]),p=l((e,t="PAGE_VIEW")=>{if(!Fe(a=u,i=e)||a.fragment!==i.fragment||a.path!==i.path){var a,i,s,l,d,{page:c,params:m,fragment:v}=e,p=t,f=Fe(u,e),h=u.fragment!==v;!f||"PAGE_VIEW"!==t&&"PARAM_UPDATE"!==t||(p=h?"FRAGMENT_PUSH":"IN_PLACE"),("PAGE_VIEW"===p||"PARAM_UPDATE"===p?me(g,e,"PARAM_UPDATE"===p):"POP"!==p?Promise.resolve((l=v,d=Ke((s=e).path,l),Object.assign({},s,{path:d}))):Promise.resolve(e)).then(e=>{var t=Fe(u,e)?r:Object.assign({},m,{page:c});D(r,t)?(Xe(e,p),o(t,e.path),n(e)):window.location=e.path})}},[g,o,n,r,u]),f=d(()=>[Object.assign({},ge(u)),Object.assign({},c,{navigate:p,navigateToFragment:v})],[u,p,v,c]);return a.createElement(G.Provider,{value:f},a.createElement(Je,null,e))},Ye=({children:e,deviceId:t,isWebview:a,viewportCategory:n,userAgentCategory:o,os:i,browser:s,securityToken:l,userId:d,initialAbsoluteUrl:u,locale:c,isRtl:m,language:g,cdnPrefix:v,drsInfo:p,version:f,domainName:h,servlet:E,sessionId:I})=>{var y=r.useMemo(()=>({locale:{code:c,isRtl:m,language:g},cdnPrefix:v,domainName:h,version:f}),[c,m,v,g,h,f]),[P,w]=r.useState({userId:d,sessionId:I});r.useEffect(()=>{w({userId:d,sessionId:I})},[d,I]);var b=r.useMemo(()=>({id:t,isWebview:a,viewportCategory:n,userAgentCategory:o,jsEngine:{family:"UNKNOWN",majorVersion:-1},renderEngine:{family:"UNKNOWN",majorVersion:-1},os:i,browser:s,securityToken:l}),[n,t,o,i,s,a,l]),A=r.useMemo(()=>({drsInfo:p,ssrLogs:[],renderError:null,stagingError:null,debugTool:!1,serviceCalls:[],serviceWorker:!1}),[p]),R=r.useMemo(()=>({servlet:E,fullPageUrl:u}),[E,u]),D={getMessage:C,loadMessages:()=>{throw new Error("loadMessages is not supported in LithiumBridge")}};return r.createElement(L.Provider,{value:y},r.createElement(F.Provider,{value:A},r.createElement(z.Provider,{value:P},r.createElement(V.Provider,{value:w},r.createElement(H.Provider,{value:b},r.createElement(Re,null,r.createElement(De,null,r.createElement(ee.Provider,{value:D},r.createElement(Y,null,r.createElement(Q,null,r.createElement(Ve,null,r.createElement(te,null,r.createElement(Z,{config:R,suppressConfigWarnings:!0},r.createElement(Le,null,e))))))))))))))},Ze=({store:e,urqlClient:t,children:a})=>r.createElement(v,{store:e},r.createElement(y,{client:t},r.createElement(Te,null,r.createElement(K,null,r.createElement(T,null,r.createElement(Q,null,a)))))),et=(e,t,r,a)=>!E("sentryio_js")||_e?Promise.resolve():W(e,t,r,a).then(e=>{_e=e,define("@ta/sentryBridge",[],()=>e)}),tt={},rt={},at={},nt=e=>(b(e.messages),I(e.features),Promise.all([...e.css.map(e=>(e in at||(at[e]=$(Oe.redux.meta.imageCdnUrl+e)),at[e])),...e.js.map(e=>(e in at||(at[e]=U(Oe.redux.meta.imageCdnUrl+e)),at[e]))]).then(()=>$WP.getChunkPromise(e.chunkId))),ot={},it=e=>(e in tt||(tt[e]=fetch("/data/1.0/bundle/dependencies/bundle?name="+encodeURIComponent(e),{credentials:"same-origin",headers:{"x-ta-version":$e}}).then(e=>e.json()).then(t=>(ot[e]=t.chunkId,t)).then(nt)),tt[e]),st=e=>(e in rt||(rt[e]=fetch("/data/1.0/bundle/dependencies/chunk?id="+encodeURIComponent(e),{credentials:"same-origin",headers:{"x-ta-version":$e}}).then(e=>e.json()).then(nt)),rt[e]),lt=(e,t)=>a.createElement(h,{store:Se},a.createElement(Ze,{store:Se,urqlClient:Ue},e)),dt=()=>{var[e,{uid:t}]=a.useContext(G);return X(e,t),B(),null},ut="data-component-init",ct=(e,t,r={})=>{var n=document.getElementById(e);if(null!==n){if(!n.getAttribute(ut)){n.setAttribute(ut,ut);var o=e=>{new p(Se,e,r).reload(),u(lt(a.createElement(e,r)),n)};if("string"==typeof t){var i=ot[t];$WP.getChunkPromise(i).then(e=>o(e.default))}else o(t)}}else console.error("Unable to find DOM element with id = "+e)},mt=e=>{var t=document.getElementById(e);null!==t&&(c(t),t.removeAttribute(ut))},gt=(e,t,r={})=>{var n=document.getElementById(e);if(null!==n){if(!n.getAttribute(ut)){n.setAttribute(ut,ut);var o=e=>{new p(Se,e,r).stage(r),m(lt(a.createElement(e,r)),n)};if("string"==typeof t){var i=ot[t];$WP.getChunkPromise(i).then(e=>o(e.default))}else o(t)}}else console.error("Unable to find DOM element with id = "+e)},vt=(e,t)=>{var r=a.createElement(Ze,{store:Se,urqlClient:Ue},e);return t&&(r=a.createElement(h,{store:Se},r)),r};return[()=>{Ae=n(He),Re=g(e=>({preferencesTravelInfo:e.travelerInfo.preferences,attractionsTravelInfo:e.travelerInfo.attractions,restaurantsDate:e.travelerInfo.restaurants&&e.travelerInfo.restaurants.date,hotelsTravelInfo:e.travelerInfo.hotels,flightsTravelInfo:e.travelerInfo.flights}),e=>({setCurrency:t=>e(O.travelerInfo.setCurrency(t)),setRestaurantsDate:(t,r)=>e(O.travelerInfo.setEatTravelerDate(t,r)),setHotelsTravelInfo:(t,r)=>e(O.travelerInfo.setHotelsTravelerInfo(t,r,!1)),setAttractionsTravelInfo:(t,r,a,n,o)=>e({type:"SET_ATTRACTIONS_TRAVELER_INFO",travelerInfo:{singleDate:t,fromDate:r,toDate:a,attractionPaxAdults:n,attractionPaxChildren:o}}),setFlightsTravelInfo:(t,r,a,n,o)=>e(O.travelerInfo.setFlightsTravelerInfo(t,r,a,n,o))}))(Ge),De=g((e,t)=>Object.assign({},t,{lithiumRouteContext:e.lithiumRoute,legacyRoute:e.route}),{lithiumNavigateAction:O.lithiumRoute.navigate,legacyNavigateAction:O.route.navigate})(Qe),Te=g((e,t)=>Object.assign({},t,{deviceId:e.tracking.uniqueId,isWebview:e.meta.isNativeWebview,viewportCategory:e.meta.device.viewportCategory,userAgentCategory:e.meta.device.userAgentCategory,os:e.meta.device.os,browser:e.meta.device.browser,securityToken:e.meta.device.securityToken,userId:e.auth.loggedInUserId,initialAbsoluteUrl:e.meta.initialAbsoluteUrl,locale:e.i18n.ietfLocale,isRtl:e.i18n.isRtl,language:e.i18n.language,cdnPrefix:e.meta.imageCdnUrl,drsInfo:e.tracking.drsInfo,version:e.webVersion||`${e.tracking.vcsBranch}|${e.tracking.vcsRevision}`,domainName:e.meta.baseUrl.split("://")[1],servlet:e.meta.initialServletName,sessionId:e.tracking.sessionId}))(Ye),({pageManifest:Oe}=__WEB_CONTEXT__),A("Components Initialization"),A("Components Bundle Load"),Oe.bundles.forEach(e=>{rt[e]=$WP.getChunkPromise(e)}),Promise.all(Object.values(rt)).then(()=>{R("Components Bundle Load")}),Oe.assets.forEach(e=>{at[e]=Promise.resolve(!0)}),b(Oe.messages),I(Oe.features),Se=S(Oe.redux),({csrfToken:ke}=Se.getState().auth),({vcsRevision:Me,vcsBranch:Ne,uid:xe}=Se.getState().tracking),$e=Se.getState().webVersion||`${Ne||""}|${Me||""}`,Ue=P({securityToken:ke,ssrData:Oe.urqlCache,initialPvid:xe}),$WP.installResolver(st),We=a.createElement(h,{store:Se},a.createElement(v,{store:Se},a.createElement(T,null,a.createElement(J,null),a.createElement(_,null),a.createElement(dt,null),a.createElement(j,{installer:et,fallbackPageName:Oe.redux.route.page,project:"tripadvisor-web-app"}),a.createElement(f,null)))),A("Loadables"),je=Promise.all(Oe.lazyLoadedModules.filter(e=>!!e).map(e=>$WP.getChunkEmptyPromise(e))).finally(()=>{R("Loadables");var{body:e}=document,t=document.createElement("div");t.id="singletonRoot",e&&(e.appendChild(t),u(lt(We),t)),A("Hydration"),Se.dispatch(k());var r=[];return Oe.hydrations.forEach(e=>{var t=document.getElementById(e.id);null===t||t.getAttribute(ut)||(t.setAttribute(ut,ut),r.push(()=>new Promise(r=>{$WP.getChunkPromise(e.package).then(n=>{e.package,e.id,new p(Se,n.default,e.props).stage(e.props),m(lt(a.createElement(n.default,e.props)),t,()=>{r()})})})))}),Promise.all(r.map(e=>{var t=e();return t?t.then(null,()=>null):t}))}).finally(()=>{R("Hydration"),Se.dispatch(M()),N(),A("Render");var e=[];Oe.renders.forEach(t=>{var r=document.getElementById(t.id);null===r||r.getAttribute(ut)||(r.setAttribute(ut,ut),e.push(new Promise(e=>{$WP.getChunkPromise(t.package).then(n=>{new p(Se,n.default,t.props).reload(),t.package,t.id,u(lt(a.createElement(n.default,t.props)),r,()=>{e()})})})))}),Promise.all(e).finally(()=>{if(R("Render"),R("Components Initialization"),E("prod_runtime_tracking")&&"undefined"!=typeof window&&window.performance&&window.performance.getEntriesByName){var e=window.performance.getEntriesByName("components-Components Initialization-end","mark");if(e&&e.length>0){var t=e[0].startTime;null!==t&&x({module:"runtime",action:"initialization_complete",context:Number(t).toString()})}}})}),Be=Oe.hydrations.concat(Oe.renders).reduce((e,t)=>(e[t.id]=t.props,e),{}),define("@ta/platform.runtime",[],()=>({pageManifestComponents:Be,wrapSubrootElement:vt,hydrateRoot:gt,destroyRoot:mt,createRoot:ct,default:je,importBundle:it})),e("default",je),e({createRoot:ct,destroyRoot:mt,hydrateRoot:gt,importBundle:it,pageManifestComponents:Be,wrapSubrootElement:vt})},[e=>(r=e,a=e.default,n=e.memo,o=e.useContext,i=e.useState,s=e.useEffect,l=e.useCallback,d=e.useMemo),e=>(u=e.render,c=e.unmountComponentAtNode,m=e.hydrate),e=>(g=e.connect,v=e.Provider),e=>p=e.ApiMonitor,e=>f=e.ConsentProvider,e=>h=e.ErrorBoundary,e=>(E=e.featureIsEnabled,I=e.loadFeatures),e=>(y=e.default,P=e.buildUrqlClient),e=>(w=e.globalize,C=e.getMessage,b=e.loadMessages),e=>(A=e.start,R=e.end),e=>(D=e.canNavigate,T=e.Router,_=e.History),e=>(O=e.actions,S=e.initializeStore,k=e.pauseRequestAction,M=e.resumeRequestAction,N=e.storeResizeHandler),e=>x=e.default,e=>($=e.importCss,U=e.importScript),e=>(W=e.installSentry,j=e.Sentry),e=>B=e.useSubmitInteractionBufferEffect,e=>(H=e.Device,L=e.Environment,q=e.TravelInfo,z=e.Visitor,G=e.Route,V=e.Authenticate,F=e.Debug),e=>X=e.usePageViewLogging,e=>(K=e.PopupHierarchyProvider,J=e.PopupHierarchyRootRenderer),e=>Q=e.VirtualDOMPortalProvider,e=>{},e=>Y=e.KeyboardNavigationModeProvider,e=>Z=e.MonikerConfiguration,e=>ee=e.Messages,e=>te=e.ToastProvider,e=>(re=e.serializeDate,ae=e.parseDate,ne=e.parseStayDates,oe=e.parseGuestInfo),e=>ie=e.NativeBridge,e=>se=e.default,e=>le=e.default,e=>de=e.Login,e=>ue=e.default,e=>ce=e.useClient,e=>(me=e.tryToCanonicalizeRoute,ge=e.getBackwardsCompatRoute),e=>ve=e.default,e=>(pe=e.AD_TEST_MODE_STORAGE_KEY,fe=e.TestAdServer,he=e.AmazonAdServer,Ee=e.RubiconAdServer,Ie=e.PreBiddingGptAdServer,ye=e.GptAdServer,Pe=e.AdServer,we=e.PageTargetingProvider,Ce=e.TestModeIndicator)]]},["cDcdfi","faye7n","h74DsO","RiHMo-","lMO0v3","nIW_Rw","-i3PJS","OnmvvE","535agn","B7vHz6","N4pTU2","aunxON","Jk5sjx","pLbCP4","UhC_bI","fsml46","2R4xv2","xZoNdB","drdfeZ","vq6MSq","RH7wJe","W3_c4H","jb_4W2","0DsHEV","Q7TAd7","oo669z","Ov85iR","SfdMbo","VANuRt","mv7yXI","YwNsO_","5X2em-","F8raOV","jaCyxS","5-GvUO"]]);
